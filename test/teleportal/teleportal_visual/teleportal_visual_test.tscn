[gd_scene load_steps=9 format=2]

[ext_resource path="res://terrain/terrain.tscn" type="PackedScene" id=1]
[ext_resource path="res://assets/texture/background.png" type="Texture" id=2]
[ext_resource path="res://assets/texture/light.png" type="Texture" id=3]
[ext_resource path="res://test/teleportal/teleportal_visual/portal.gd" type="Script" id=4]
[ext_resource path="res://test/teleportal/teleportal_visual/light.gd" type="Script" id=5]
[ext_resource path="res://test/teleportal/dreamland/dreamland.tscn" type="PackedScene" id=6]
[ext_resource path="res://test/teleportal/teleportal_visual/teleportal_visual_test.gd" type="Script" id=7]

[sub_resource type="OccluderPolygon2D" id=1]
closed = false
cull_mode = 2
polygon = PoolVector2Array( 376, 128, 376, 120, 384, 120, 384, 160, 376, 160, 376, 152, 368, 152 )

[node name="Node2D" type="Node2D"]
script = ExtResource( 7 )

[node name="terrain" parent="." instance=ExtResource( 1 )]
tile_data = PoolIntArray( 720991, 8, 393216, 786525, 8, 393217, 786526, 8, 262147, 852059, 8, 393217, 852060, 8, 262147, 917592, 8, 393217, 917593, 8, 2, 917594, 8, 262147, 983126, 8, 393217, 983127, 8, 262147, 1048656, 8, 1, 1048657, 8, 2, 1048658, 8, 2, 1048659, 8, 2, 1048660, 8, 2, 1048661, 8, 262147, 1376329, 8, 393217, 1376330, 8, 3, 1441864, 8, 262151, 1507399, 8, 262151, 1572934, 8, 262151, 1638469, 8, 262151, 1638512, 8, 65536, 1704004, 8, 327682, 1704048, 8, 196609, 1704049, 8, 65539, 1769540, 8, 458752, 1769585, 8, 131072, 1835075, 8, 262151, 1835121, 8, 131072, 1900610, 8, 327682, 1900657, 8, 131072, 1966146, 8, 458752, 1966174, 8, 65537, 1966175, 8, 65539, 1966193, 8, 131072, 2031681, 8, 327682, 2031709, 8, 1, 2031710, 8, 131074, 2031711, 8, 131075, 2031729, 8, 131072, 2097217, 8, 458752, 2097246, 8, 196609, 2097247, 8, 131075, 2097265, 8, 131072, 2162752, 8, 327682, 2162783, 8, 131072, 2162801, 8, 131072, 2228288, 8, 458752, 2228319, 8, 131072, 2228337, 8, 131072, 2293823, 8, 262146, 2293855, 8, 131072, 2293873, 8, 131072, 2359391, 8, 131072, 2359409, 8, 131072, 2424927, 8, 458752, 2424945, 8, 131072, 2490453, 8, 65537, 2490454, 8, 2, 2490455, 8, 2, 2490456, 8, 2, 2490457, 8, 2, 2490458, 8, 2, 2490459, 8, 2, 2490460, 8, 2, 2490461, 8, 2, 2490462, 8, 262147, 2490481, 8, 131072, 2555969, 8, 65537, 2555970, 8, 2, 2555971, 8, 3, 2555981, 8, 1, 2555982, 8, 2, 2555983, 8, 2, 2555984, 8, 2, 2555985, 8, 2, 2555986, 8, 2, 2555987, 8, 2, 2555988, 8, 2, 2555989, 8, 196611, 2556017, 8, 131072, 2621502, 8, 65537, 2621503, 8, 2, 2621504, 8, 2, 2621505, 8, 196611, 2621553, 8, 458752, 2687034, 8, 393217, 2687035, 8, 2, 2687036, 8, 2, 2687037, 8, 2, 2687038, 8, 196611, 2687088, 8, 327682, 2752566, 8, 393217, 2752567, 8, 2, 2752568, 8, 2, 2752569, 8, 262147, 2752624, 8, 458752, 2818100, 8, 65537, 2818101, 8, 262147, 2818120, 8, 1, 2818121, 8, 2, 2818122, 8, 2, 2818123, 8, 2, 2818124, 8, 2, 2818125, 8, 2, 2818126, 8, 65539, 2818159, 8, 262151, 2883634, 8, 65537, 2883635, 8, 2, 2883636, 8, 196611, 2883662, 8, 196609, 2883663, 8, 2, 2883664, 8, 2, 2883665, 8, 393219, 2883682, 8, 393217, 2883683, 8, 3, 2883694, 8, 262151, 2949166, 8, 65537, 2949167, 8, 2, 2949168, 8, 2, 2949169, 8, 2, 2949170, 8, 196611, 2949202, 8, 262145, 2949203, 8, 2, 2949204, 8, 2, 2949205, 8, 393219, 2949211, 8, 65537, 2949212, 8, 2, 2949213, 8, 2, 2949214, 8, 2, 2949215, 8, 2, 2949216, 8, 2, 2949217, 8, 262147, 2949228, 8, 393217, 2949229, 8, 262147, 3014700, 8, 65537, 3014701, 8, 2, 3014702, 8, 196611, 3014742, 8, 262145, 3014743, 8, 2, 3014744, 8, 2, 3014745, 8, 2, 3014746, 8, 2, 3014747, 8, 196611, 3014762, 8, 393217, 3014763, 8, 262147, 3080235, 8, 393217, 3080236, 8, 196611, 3080253, 8, 65536, 3080296, 8, 393217, 3080297, 8, 262147, 3145769, 8, 1, 3145770, 8, 262147, 3145789, 8, 196608, 3145830, 8, 393217, 3145831, 8, 262147, 3211364, 8, 1, 3211365, 8, 262147, 3473483, 8, 1, 3473484, 8, 2, 3473485, 8, 65539, 3539021, 8, 458754, 3604558, 8, 262145, 3604559, 8, 393219, 3670096, 8, 262150, 3735633, 8, 262145, 3735634, 8, 393219, 3801171, 8, 262150, 3866708, 8, 262144, 4194437, 8, 393216, 4259971, 8, 65537, 4259972, 8, 262147, 4325505, 8, 65537, 4325506, 8, 2, 4325507, 8, 196611, 4390959, 8, 1, 4390960, 8, 2, 4390961, 8, 393219, 4391039, 8, 393217, 4391040, 8, 2, 4391041, 8, 196611, 4456498, 8, 262150, 4456572, 8, 393217, 4456573, 8, 2, 4456574, 8, 262147, 4522035, 8, 262145, 4522036, 8, 393219, 4522104, 8, 393217, 4522105, 8, 2, 4522106, 8, 2, 4522107, 8, 262147, 4587573, 8, 262145, 4587574, 8, 393219, 4587634, 8, 65537, 4587635, 8, 2, 4587636, 8, 2, 4587637, 8, 2, 4587638, 8, 2, 4587639, 8, 262147, 4653111, 8, 262145, 4653112, 8, 2, 4653113, 8, 2, 4653114, 8, 2, 4653115, 8, 2, 4653116, 8, 393219, 4653166, 8, 393217, 4653167, 8, 2, 4653168, 8, 2, 4653169, 8, 2, 4653170, 8, 196611, 4718653, 8, 262145, 4718654, 8, 2, 4718655, 8, 393219, 4718699, 8, 393217, 4718700, 8, 2, 4718701, 8, 262147, 4784192, 8, 262145, 4784193, 8, 2, 4784194, 8, 393219, 4784230, 8, 393217, 4784231, 8, 2, 4784232, 8, 2, 4784233, 8, 2, 4784234, 8, 262147, 4849731, 8, 262145, 4849732, 8, 2, 4849733, 8, 2, 4849734, 8, 2, 4849735, 8, 2, 4849736, 8, 393219, 4849762, 8, 393217, 4849763, 8, 2, 4849764, 8, 2, 4849765, 8, 262147, 4915273, 8, 262145, 4915274, 8, 2, 4915275, 8, 2, 4915276, 8, 2, 4915277, 8, 2, 4915278, 8, 2, 4915279, 8, 2, 4915280, 8, 2, 4915281, 8, 2, 4915282, 8, 2, 4915283, 8, 2, 4915284, 8, 2, 4915285, 8, 2, 4915286, 8, 2, 4915287, 8, 2, 4915288, 8, 2, 4915289, 8, 2, 4915290, 8, 2, 4915291, 8, 2, 4915292, 8, 2, 4915293, 8, 2, 4915294, 8, 2, 4915295, 8, 2, 4915296, 8, 2, 4915297, 8, 262147 )

[node name="terrain2" parent="." instance=ExtResource( 1 )]
collision_layer = 0
collision_mask = 0
occluder_light_mask = 2
tile_data = PoolIntArray( 786525, 8, 393216, 852059, 8, 393217, 852060, 8, 262147, 917592, 8, 393217, 917593, 8, 2, 917594, 8, 262147, 983126, 8, 393217, 983127, 8, 262147, 1048656, 8, 1, 1048657, 8, 2, 1048658, 8, 2, 1048659, 8, 2, 1048660, 8, 2, 1048661, 8, 262147, 1376329, 8, 393217, 1376330, 8, 3, 1441864, 8, 262151, 1507399, 8, 262151, 1572934, 8, 262151, 1638469, 8, 262151, 1704004, 8, 327682, 1769540, 8, 458752, 1835075, 8, 262151, 1900610, 8, 327682, 1966146, 8, 458752, 2031681, 8, 327682, 2031709, 8, 0, 2097217, 8, 458752, 2162752, 8, 327682, 2228288, 8, 458752, 2293823, 8, 262146, 2490453, 8, 65537, 2490454, 8, 2, 2490455, 8, 2, 2490456, 8, 2, 2490457, 8, 2, 2490458, 8, 2, 2490459, 8, 2, 2490460, 8, 2, 2490461, 8, 3, 2555969, 8, 65537, 2555970, 8, 2, 2555971, 8, 3, 2555981, 8, 1, 2555982, 8, 2, 2555983, 8, 2, 2555984, 8, 2, 2555985, 8, 2, 2555986, 8, 2, 2555987, 8, 2, 2555988, 8, 2, 2555989, 8, 196611, 2621502, 8, 65537, 2621503, 8, 2, 2621504, 8, 2, 2621505, 8, 196611, 2687034, 8, 393217, 2687035, 8, 2, 2687036, 8, 2, 2687037, 8, 2, 2687038, 8, 196611, 2752566, 8, 393217, 2752567, 8, 2, 2752568, 8, 2, 2752569, 8, 262147, 2818100, 8, 65537, 2818101, 8, 262147, 2818120, 8, 1, 2818121, 8, 2, 2818122, 8, 2, 2818123, 8, 2, 2818124, 8, 2, 2818125, 8, 2, 2818126, 8, 65539, 2883634, 8, 65537, 2883635, 8, 2, 2883636, 8, 196611, 2883662, 8, 196609, 2883663, 8, 2, 2883664, 8, 2, 2883665, 8, 393219, 2949166, 8, 65537, 2949167, 8, 2, 2949168, 8, 2, 2949169, 8, 2, 2949170, 8, 196611, 2949202, 8, 262145, 2949203, 8, 2, 2949204, 8, 2, 2949205, 8, 393219, 2949211, 8, 65537, 2949212, 8, 2, 2949213, 8, 3, 3014700, 8, 65537, 3014701, 8, 2, 3014702, 8, 196611, 3014742, 8, 262145, 3014743, 8, 2, 3014744, 8, 2, 3014745, 8, 2, 3014746, 8, 2, 3014747, 8, 196611, 3080235, 8, 393217, 3080236, 8, 196611, 3080253, 8, 65536, 3145769, 8, 1, 3145770, 8, 262147, 3145789, 8, 196608, 3473483, 8, 1, 3473484, 8, 2, 3473485, 8, 65539, 3539021, 8, 458754, 3604558, 8, 262145, 3604559, 8, 393219, 3670096, 8, 262150, 3735633, 8, 262145, 3735634, 8, 393219, 3801171, 8, 262150, 3866708, 8, 262144, 4390959, 8, 1, 4390960, 8, 2, 4390961, 8, 393219, 4456498, 8, 262150, 4522035, 8, 262145, 4522036, 8, 393219, 4587573, 8, 262145, 4587574, 8, 393219, 4653111, 8, 262145, 4653112, 8, 2, 4653113, 8, 2, 4653114, 8, 2, 4653115, 8, 2, 4653116, 8, 393219, 4718653, 8, 262145, 4718654, 8, 2, 4718655, 8, 393219, 4784192, 8, 262145, 4784193, 8, 2, 4784194, 8, 393219, 4849731, 8, 262145, 4849732, 8, 2, 4849733, 8, 2, 4849734, 8, 2, 4849735, 8, 2, 4849736, 8, 393219, 4915273, 8, 262145, 4915274, 8, 2, 4915275, 8, 2, 4915276, 8, 2, 4915277, 8, 2, 4915278, 8, 2, 4915279, 8, 2, 4915280, 8, 2, 4915281, 8, 2, 4915282, 8, 2, 4915283, 8, 2, 4915284, 8, 2, 4915285, 8, 2, 4915286, 8, 2, 4915287, 8, 2, 4915288, 8, 2, 4915289, 8, 2, 4915290, 8, 2, 4915291, 8, 2, 4915292, 8, 2, 4915293, 8, 3 )

[node name="portal" type="Line2D" parent="."]
light_mask = 2
points = PoolVector2Array( 376, 128, 376, 152 )
width = 1.0
default_color = Color( 0.4, 0.501961, 1, 1 )
script = ExtResource( 4 )

[node name="render_polygon" type="Polygon2D" parent="portal"]
light_mask = 2
polygon = PoolVector2Array( 0, 0, 0, 0, 0, 0, 0, 0 )
uv = PoolVector2Array( 0, 0, 0, 0, 0, 0, 0, 0 )
vertex_colors = PoolColorArray( 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 )

[node name="cull" type="Area2D" parent="portal"]
collision_layer = 0
collision_mask = 5

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="portal/cull"]
polygon = PoolVector2Array( 0, 0, 0, 0, 0, 0 )

[node name="LightOccluder2D" type="LightOccluder2D" parent="portal"]
light_mask = 2
occluder = SubResource( 1 )
light_mask = 2

[node name="TextureRect" type="TextureRect" parent="."]
show_behind_parent = true
margin_left = 8.0
margin_right = 648.0
margin_bottom = 320.0
texture = ExtResource( 2 )
stretch_mode = 2
__meta__ = {
"_edit_use_anchors_": false
}

[node name="light" type="Light2D" parent="." groups=[
"pov",
]]
scale = Vector2( 100, 100 )
texture = ExtResource( 3 )
mode = 3
shadow_enabled = true
script = ExtResource( 5 )

[node name="light2" type="Light2D" parent="." groups=[
"pov",
]]
light_mask = 2
scale = Vector2( 100, 100 )
texture = ExtResource( 3 )
mode = 3
range_item_cull_mask = 2
shadow_enabled = true
shadow_item_cull_mask = 2
script = ExtResource( 5 )

[node name="Viewport" type="Viewport" parent="."]
size = Vector2( 640, 320 )
render_target_v_flip = true

[node name="dreamland" parent="Viewport" instance=ExtResource( 6 )]

[connection signal="body_entered" from="portal/cull" to="portal" method="_on_cull_body_entered"]
[connection signal="body_shape_entered" from="portal/cull" to="portal" method="_on_cull_body_shape_entered"]
